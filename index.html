<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <title>Gallery Kenangan <3</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <!-- Font Awesome 6 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <!-- Supabase (opsional) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', 'Segoe UI', system-ui, sans-serif;
        }

        body {
            background: linear-gradient(145deg, #fff0f7 0%, #ffe2ed 100%);
            color: #4a2c3a;
            min-height: 100vh;
            position: relative;
            overflow-x: hidden;
        }

        /* Floating hearts background */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" opacity="0.1"><path fill="%23ff69b4" d="M50 30c-5-10-20-10-25 0-5 10 5 25 25 35 20-10 30-25 25-35-5-10-20-10-25 0z"/></svg>');
            background-size: 80px 80px;
            animation: float 20s linear infinite;
            z-index: -1;
        }

        @keyframes float {
            0% { transform: translateY(0) rotate(0deg); }
            100% { transform: translateY(-100vh) rotate(360deg); }
        }

        /* Navbar */
        .navbar {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            padding: 15px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 2px solid rgba(255, 182, 193, 0.6);
            box-shadow: 0 10px 30px rgba(255, 105, 180, 0.15);
            position: sticky;
            top: 0;
            z-index: 100;
            animation: slideDown 0.5s ease;
        }

        @keyframes slideDown {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 700;
            background: linear-gradient(135deg, #ff3388, #ff6eb4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-links {
            display: flex;
            gap: 20px;
        }

        .nav-link {
            text-decoration: none;
            padding: 10px 28px;
            border-radius: 60px;
            font-weight: 600;
            transition: 0.3s;
            background: rgba(255, 255, 255, 0.6);
            color: #b34e7a;
            border: 1px solid white;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.5);
            transform: translate(-50%, -50%);
            transition: width 0.5s, height 0.5s;
        }

        .nav-link:hover::before {
            width: 200px;
            height: 200px;
        }

        .nav-link.active {
            background: #ff69b4;
            color: white;
            box-shadow: 0 8px 20px rgba(255, 105, 180, 0.5);
            animation: glow 1.5s infinite;
        }

        @keyframes glow {
            0% { box-shadow: 0 0 5px #ff69b4; }
            50% { box-shadow: 0 0 20px #ff69b4; }
            100% { box-shadow: 0 0 5px #ff69b4; }
        }

        /* Status mini */
        .status-mini {
            background: rgba(255, 240, 248, 0.8);
            backdrop-filter: blur(8px);
            padding: 10px 30px;
            display: flex;
            gap: 30px;
            font-size: 0.9rem;
            border-bottom: 1px solid rgba(255, 182, 193, 0.4);
            color: #7a4f66;
            animation: fadeIn 1s ease;
        }

        .status-mini span {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .status-mini i {
            color: #ff69b4;
        }

        /* Container */
        .container {
            padding: 25px 30px;
            max-width: 1400px;
            margin: 0 auto;
        }

        /* Pages */
        #gallery-page, #dashboard-page {
            display: none;
            animation: pageFade 0.4s ease;
        }

        @keyframes pageFade {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        #gallery-page.active-page, #dashboard-page.active-page {
            display: block;
        }

        .page-title {
            font-size: 2rem;
            font-weight: 600;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(255,255,255,0.5);
            padding: 10px 28px;
            border-radius: 60px;
            width: fit-content;
            backdrop-filter: blur(4px);
            color: #b34e7a;
            animation: popIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            box-shadow: 0 5px 15px rgba(255,105,180,0.2);
        }

        @keyframes popIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        /* Gallery inner tabs */
        .gallery-inner-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .inner-tab {
            background: rgba(255,255,255,0.6);
            backdrop-filter: blur(4px);
            border: 2px solid white;
            padding: 10px 25px;
            border-radius: 60px;
            font-weight: 600;
            color: #b34e7a;
            cursor: pointer;
            transition: 0.3s;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .inner-tab:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255,105,180,0.3);
        }

        .inner-tab.active {
            background: #ff69b4;
            color: white;
            border-color: #ff69b4;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(255,105,180,0.7); }
            70% { box-shadow: 0 0 0 10px rgba(255,105,180,0); }
            100% { box-shadow: 0 0 0 0 rgba(255,105,180,0); }
        }

        /* Music player */
        .music-player {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 80px;
            padding: 15px 25px;
            margin-bottom: 25px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 15px;
            border: 1px solid white;
            box-shadow: 0 10px 30px rgba(255,105,180,0.2);
            animation: float 4s infinite ease-in-out;
            position: relative;
            overflow: hidden;
        }

        .music-player::after {
            content: '❤️';
            position: absolute;
            font-size: 2rem;
            opacity: 0.1;
            right: 10px;
            bottom: -10px;
            transform: rotate(20deg);
            animation: rotate 10s linear infinite;
        }

        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-5px); }
            100% { transform: translateY(0); }
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .music-controls {
            display: flex;
            gap: 15px;
        }

        .music-btn {
            background: #ff69b4;
            color: white;
            border: none;
            width: 45px;
            height: 45px;
            border-radius: 50%;
            font-size: 1.3rem;
            cursor: pointer;
            box-shadow: 0 4px 0 #b34e7a;
            transition: 0.1s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .music-btn:active {
            transform: translateY(4px);
            box-shadow: 0 1px 0 #b34e7a;
        }

        .music-info {
            font-weight: 600;
            color: #b34e7a;
            flex: 1;
            text-align: center;
        }

        .playlist {
            display: flex;
            gap: 10px;
        }

        .playlist-item {
            background: #ffe2ec;
            padding: 8px 16px;
            border-radius: 40px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .playlist-item:hover {
            background: #ffb6c1;
            transform: scale(1.05);
        }

        .playlist-item.active {
            background: #ff69b4;
            color: white;
        }

        /* Gallery grid (foto) */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 10px;
        }

        .photo-card {
            background: white;
            border-radius: 28px;
            overflow: hidden;
            box-shadow: 0 18px 30px rgba(255, 130, 160, 0.25);
            transition: 0.4s;
            cursor: pointer;
            border: 3px solid white;
            animation: cardAppear 0.5s;
            position: relative;
        }

        @keyframes cardAppear {
            from { opacity: 0; transform: scale(0.8); }
            to { opacity: 1; transform: scale(1); }
        }

        .photo-card:hover {
            transform: translateY(-15px) rotate(1deg);
            box-shadow: 0 30px 50px rgba(255, 80, 140, 0.5);
        }

        .photo-card::after {
            content: '❤️';
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.2rem;
            opacity: 0;
            transition: 0.3s;
        }

        .photo-card:hover::after {
            opacity: 0.7;
            transform: scale(1.2);
        }

        .photo-card img {
            width: 100%;
            aspect-ratio: 1/1;
            object-fit: cover;
            transition: 0.5s;
        }

        .photo-card:hover img {
            transform: scale(1.05);
        }

        .photo-info {
            padding: 14px;
            background: rgba(255, 240, 250, 0.9);
        }

        .photo-info h4 {
            font-size: 1rem;
            font-weight: 600;
            color: #b34e7a;
        }

        .photo-info p {
            font-size: 0.8rem;
            color: #6b4e5c;
        }

        .empty-message {
            text-align: center;
            padding: 60px;
            background: rgba(255,255,255,0.6);
            border-radius: 50px;
            font-size: 1.3rem;
            color: #ff69b4;
            animation: fadeIn 1s;
        }

        /* Catatan page */
        .notes-container {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .note-card {
            background: rgba(255,255,255,0.8);
            backdrop-filter: blur(10px);
            border-radius: 50px;
            padding: 20px;
            border: 2px solid white;
            box-shadow: 0 10px 20px rgba(255,105,180,0.2);
            animation: slideInRight 0.4s, loveGlow 3s infinite;
            position: relative;
            overflow: hidden;
        }

        @keyframes loveGlow {
            0% { border-color: white; }
            50% { border-color: #ffb6c1; box-shadow: 0 0 20px #ff69b4; }
            100% { border-color: white; }
        }

        @keyframes slideInRight {
            from { transform: translateX(30px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .note-card::before {
            content: '❤️';
            position: absolute;
            font-size: 2rem;
            opacity: 0.1;
            right: -10px;
            bottom: -10px;
            transform: rotate(15deg);
            animation: floatHeart 5s infinite;
        }

        @keyframes floatHeart {
            0% { transform: translateY(0) rotate(15deg); }
            50% { transform: translateY(-10px) rotate(20deg); }
            100% { transform: translateY(0) rotate(15deg); }
        }

        .note-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .note-time {
            font-size: 0.8rem;
            color: #b34e7a;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .note-content {
            font-size: 1.1rem;
            margin-bottom: 10px;
            white-space: pre-wrap;
            position: relative;
            z-index: 2;
        }

        .note-timer {
            font-weight: 600;
            color: #ff69b4;
            background: rgba(255,255,255,0.5);
            padding: 2px 10px;
            border-radius: 40px;
        }

        .create-note {
            background: white;
            border-radius: 50px;
            padding: 25px;
            margin-top: 20px;
            animation: fadeInUp 0.5s;
            border: 2px solid #ffb6c1;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .create-note textarea {
            width: 100%;
            border: 2px solid #ffd0df;
            border-radius: 40px;
            padding: 15px;
            font-size: 1rem;
            margin-bottom: 15px;
            transition: 0.3s;
        }

        .create-note textarea:focus {
            border-color: #ff69b4;
            box-shadow: 0 0 0 4px rgba(255,105,180,0.2);
            outline: none;
        }

        .timer-select {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 15px;
        }

        .timer-option {
            background: #ffe2ec;
            border: none;
            padding: 8px 16px;
            border-radius: 40px;
            font-weight: 600;
            color: #b34e7a;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .timer-option:hover {
            background: #ffb6c1;
            transform: scale(1.05);
        }

        .timer-option.active {
            background: #ff69b4;
            color: white;
        }

        .create-note button {
            background: #ff69b4;
            color: white;
            border: none;
            padding: 14px;
            border-radius: 60px;
            width: 100%;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.2s;
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .create-note button:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255,105,180,0.3);
        }

        /* Quote page */
        .quote-container {
            background: rgba(255,255,255,0.7);
            backdrop-filter: blur(10px);
            border-radius: 70px;
            padding: 40px;
            text-align: center;
            font-size: 1.5rem;
            font-style: italic;
            border: 3px solid white;
            box-shadow: 0 20px 40px rgba(255,105,180,0.2);
            min-height: 200px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            animation: zoomIn 0.5s, glowPulse 3s infinite;
            position: relative;
        }

        @keyframes glowPulse {
            0% { box-shadow: 0 0 10px #ffb6c1; }
            50% { box-shadow: 0 0 30px #ff69b4; }
            100% { box-shadow: 0 0 10px #ffb6c1; }
        }

        @keyframes zoomIn {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .quote-container i {
            font-size: 3rem;
            margin-bottom: 10px;
        }

        .new-quote-btn {
            background: #ff69b4;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 60px;
            font-weight: 600;
            font-size: 1.1rem;
            margin-top: 20px;
            cursor: pointer;
            align-self: center;
            transition: 0.3s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .new-quote-btn:hover {
            transform: rotate(2deg) scale(1.05);
            box-shadow: 0 15px 30px rgba(255,105,180,0.4);
        }

        /* Dashboard grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 25px;
        }

        .card {
            background: rgba(255, 255, 255, 0.7);
            backdrop-filter: blur(12px);
            border-radius: 48px;
            padding: 25px;
            box-shadow: 0 20px 35px rgba(255, 130, 160, 0.2);
            border: 1px solid rgba(255,255,255,0.9);
            transition: 0.3s;
            animation: cardFade 0.6s;
            position: relative;
            overflow: hidden;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 30px 45px rgba(255,105,180,0.3);
        }

        .card::after {
            content: '❤️';
            position: absolute;
            font-size: 4rem;
            opacity: 0.05;
            right: -20px;
            bottom: -20px;
            transform: rotate(20deg);
        }

        @keyframes cardFade {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #b34e7a;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .stats-row {
            display: flex;
            justify-content: space-around;
            gap: 10px;
            flex-wrap: wrap;
        }

        .stat-item {
            background: white;
            padding: 15px;
            border-radius: 40px;
            min-width: 100px;
            text-align: center;
            box-shadow: 0 4px 0 #ffb6c1;
            transition: 0.2s;
        }

        .stat-item:hover {
            transform: scale(1.05);
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: 700;
            color: #ff69b4;
            line-height: 1.2;
        }

        .stat-label {
            font-size: 0.75rem;
            color: #7a4f66;
        }

        .chart-container {
            height: 200px;
            margin-top: 10px;
        }

        .recent-list {
            list-style: none;
            max-height: 250px;
            overflow-y: auto;
        }

        .recent-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,105,180,0.2);
            animation: listItem 0.3s;
        }

        @keyframes listItem {
            from { opacity: 0; transform: translateX(-10px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .recent-item img {
            width: 50px;
            height: 50px;
            border-radius: 20px;
            object-fit: cover;
        }

        .recent-info {
            flex: 1;
        }

        .recent-info h5 {
            font-weight: 600;
            font-size: 0.9rem;
        }

        .recent-info p {
            font-size: 0.7rem;
            color: #7a4f66;
        }

        .delete-btn {
            background: none;
            border: none;
            color: #ff8aa8;
            font-size: 1.2rem;
            cursor: pointer;
            transition: 0.2s;
        }

        .delete-btn:hover {
            color: #ff3b6f;
            transform: scale(1.2);
        }

        .upload-section {
            background: white;
            border-radius: 50px;
            padding: 20px;
            margin-top: 20px;
        }

        .upload-area {
            border: 2px dashed #ffb6c1;
            border-radius: 40px;
            padding: 20px;
            text-align: center;
            background: #fff2f7;
            margin-bottom: 15px;
            transition: 0.3s;
        }

        .upload-area:hover {
            border-color: #ff69b4;
            background: #ffe9f2;
        }

        #file-input {
            display: none;
        }

        .file-label {
            background: #ff69b4;
            color: white;
            padding: 12px 30px;
            border-radius: 60px;
            cursor: pointer;
            display: inline-block;
            font-weight: 600;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .file-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255,105,180,0.3);
        }

        #image-preview {
            max-width: 100%;
            max-height: 200px;
            margin-top: 15px;
            border-radius: 30px;
            display: none;
            border: 4px solid white;
        }

        .ratio-selector {
            display: flex;
            gap: 8px;
            justify-content: center;
            margin: 20px 0;
        }

        .ratio-btn {
            background: #ffe2ec;
            border: none;
            padding: 8px 18px;
            border-radius: 40px;
            font-weight: 600;
            color: #b34e7a;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .ratio-btn:hover {
            background: #ffb6c1;
        }

        .ratio-btn.active {
            background: #ff69b4;
            color: white;
        }

        .category-selector {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }

        .category-btn {
            background: #ffe2ec;
            border: none;
            padding: 8px 20px;
            border-radius: 40px;
            font-weight: 600;
            color: #b34e7a;
            cursor: pointer;
            transition: 0.2s;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 5px;
        }

        .category-btn.active {
            background: #ff69b4;
            color: white;
        }

        .meta-input {
            width: 100%;
            padding: 14px 20px;
            border: 2px solid #ffd0df;
            border-radius: 60px;
            margin-bottom: 15px;
            font-size: 1rem;
            transition: 0.3s;
        }

        .meta-input:focus {
            border-color: #ff69b4;
            box-shadow: 0 0 0 4px rgba(255,105,180,0.2);
            outline: none;
        }

        .upload-btn {
            background: #ff69b4;
            color: white;
            border: none;
            padding: 14px;
            border-radius: 60px;
            width: 100%;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .upload-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255,105,180,0.3);
        }

        /* Modal password */
        #password-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.4);
            backdrop-filter: blur(15px);
            z-index: 2000;
            display: none;
            align-items: center;
            justify-content: center;
            animation: fadeIn 0.3s;
        }

        .password-card {
            background: white;
            border-radius: 70px;
            padding: 40px;
            max-width: 380px;
            text-align: center;
            box-shadow: 0 30px 50px rgba(255,20,120,0.3);
            animation: popIn 0.5s;
        }

        .password-card h2 {
            color: #ff69b4;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .password-input {
            width: 100%;
            padding: 15px 20px;
            border: 2px solid #ffb6c1;
            border-radius: 60px;
            font-size: 1rem;
            margin-bottom: 20px;
            transition: 0.3s;
        }

        .password-input:focus {
            border-color: #ff69b4;
            box-shadow: 0 0 0 4px rgba(255,105,180,0.2);
            outline: none;
        }

        .password-btn {
            background: #ff69b4;
            color: white;
            border: none;
            padding: 15px;
            border-radius: 60px;
            width: 100%;
            font-weight: 600;
            cursor: pointer;
            transition: 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .password-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(255,105,180,0.3);
        }

        .password-error {
            color: red;
            margin-top: 10px;
        }

        /* Modal preview foto */
        .preview-modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.7);
            backdrop-filter: blur(12px);
            z-index: 1500;
            display: none;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            animation: fadeIn 0.3s;
        }

        .preview-modal img {
            max-width: 90%;
            max-height: 70vh;
            border-radius: 50px;
            border: 5px solid white;
            animation: zoomIn 0.3s;
        }

        .preview-caption {
            color: white;
            margin-top: 20px;
            font-size: 1.3rem;
            background: rgba(255,255,255,0.2);
            padding: 10px 30px;
            border-radius: 60px;
        }

        .close-preview {
            position: absolute;
            top: 30px;
            right: 40px;
            color: white;
            font-size: 4rem;
            cursor: pointer;
            transition: 0.2s;
        }

        .close-preview:hover {
            transform: scale(1.2);
        }

        /* Toast */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: #ff69b4;
            color: white;
            padding: 15px 35px;
            border-radius: 60px;
            box-shadow: 0 15px 30px rgba(255,80,130,0.5);
            z-index: 3000;
            display: none;
            font-weight: 600;
            animation: slideUp 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        @keyframes slideUp {
            from { transform: translate(-50%, 100%); opacity: 0; }
            to { transform: translate(-50%, 0); opacity: 1; }
        }

        @media (max-width: 700px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .music-player {
                flex-direction: column;
                align-items: stretch;
            }
            .playlist {
                justify-content: center;
            }
        }
    </style>
</head>
<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="logo"><i class="fas fa-heart" style="color: #ff69b4;"></i> SuciRizky</div>
        <div class="nav-links">
            <a href="#" class="nav-link active" data-page="gallery"><i class="fas fa-images"></i> Gallery</a>
            <a href="#" class="nav-link" data-page="dashboard"><i class="fas fa-lock"></i> Dashboard</a>
        </div>
    </nav>

    <!-- Status mini -->
    <div class="status-mini">
        <span><i class="fas fa-globe"></i> <span id="ip-address">-</span></span>
        <span><i class="fas fa-battery-three-quarters"></i> <span id="battery-level">-</span></span>
        <span><i class="fas fa-calendar-alt"></i> <span id="current-date">-</span></span>
    </div>

    <!-- Container utama -->
    <div class="container">
        <!-- HALAMAN GALLERY -->
        <div id="gallery-page" class="active-page">
            <div class="page-title">
                <i class="fas fa-camera-retro"></i> Gallery Kenangan
            </div>

            <!-- Music player -->
            <div class="music-player">
                <div class="music-controls">
                    <button class="music-btn" id="prev-btn"><i class="fas fa-backward"></i></button>
                    <button class="music-btn" id="play-pause-btn"><i class="fas fa-play"></i></button>
                    <button class="music-btn" id="next-btn"><i class="fas fa-forward"></i></button>
                </div>
                <div class="music-info" id="music-info">Perfect - Ed Sheeran</div>
                <div class="playlist">
                    <div class="playlist-item active" data-src="music/perfect.mp3" data-name="Perfect"><i class="fas fa-music"></i> Perfect</div>
                    <div class="playlist-item" data-src="music/blue.mp3" data-name="Blue"><i class="fas fa-music"></i> Blue</div>
                    <div class="playlist-item" data-src="music/sempurna.mp3" data-name="Sempurna"><i class="fas fa-music"></i> Sempurna</div>
                </div>
                <audio id="audio-player" src="music/perfect.mp3"></audio>
            </div>

            <!-- Inner tabs: Foto, Catatan, Quote -->
            <div class="gallery-inner-tabs">
                <span class="inner-tab active" data-inner="foto"><i class="fas fa-camera"></i> Foto</span>
                <span class="inner-tab" data-inner="catatan"><i class="fas fa-pen"></i> Catatan</span>
                <span class="inner-tab" data-inner="quote"><i class="fas fa-quote-right"></i> Bucin Quote</span>
            </div>

            <!-- Konten Foto -->
            <div id="foto-content" class="inner-content">
                <!-- Filter kategori foto -->
                <div style="display: flex; gap: 12px; margin-bottom: 20px; flex-wrap: wrap;">
                    <span class="gallery-tab active" data-filter="all" style="background: rgba(255,255,255,0.6); padding: 8px 20px; border-radius: 40px; cursor: pointer; display: flex; align-items: center; gap: 5px;"><i class="fas fa-list"></i> Semua</span>
                    <span class="gallery-tab" data-filter="suci" style="background: rgba(255,255,255,0.6); padding: 8px 20px; border-radius: 40px; cursor: pointer; display: flex; align-items: center; gap: 5px;"><i class="fas fa-female"></i> Suci</span>
                    <span class="gallery-tab" data-filter="rizky" style="background: rgba(255,255,255,0.6); padding: 8px 20px; border-radius: 40px; cursor: pointer; display: flex; align-items: center; gap: 5px;"><i class="fas fa-male"></i> Rizky</span>
                    <span class="gallery-tab" data-filter="bareng" style="background: rgba(255,255,255,0.6); padding: 8px 20px; border-radius: 40px; cursor: pointer; display: flex; align-items: center; gap: 5px;"><i class="fas fa-heart"></i> Bareng</span>
                </div>
                <div class="gallery-grid" id="gallery-grid"></div>
                <div id="empty-gallery" class="empty-message" style="display: none;"><i class="fas fa-cloud-upload-alt"></i> Belum ada foto. Upload dari Dashboard ✨</div>
            </div>

            <!-- Konten Catatan -->
            <div id="catatan-content" style="display: none;">
                <div class="notes-container" id="notes-list">
                    <!-- Catatan akan muncul di sini -->
                </div>
                <div class="create-note">
                    <h3 style="margin-bottom: 15px; color: #b34e7a; display: flex; align-items: center; gap: 8px;"><i class="fas fa-pen-fancy"></i> Buat Catatan Baru</h3>
                    <textarea id="new-note-text" placeholder="Tulis pesan untuk pasanganmu..." rows="3"></textarea>
                    <div class="timer-select" id="timer-options">
                        <span class="timer-option" data-minutes="10"><i class="far fa-clock"></i> 10 menit</span>
                        <span class="timer-option" data-minutes="30"><i class="far fa-clock"></i> 30 menit</span>
                        <span class="timer-option" data-minutes="60"><i class="far fa-clock"></i> 1 jam</span>
                        <span class="timer-option" data-minutes="120"><i class="far fa-clock"></i> 2 jam</span>
                        <span class="timer-option" data-minutes="180"><i class="far fa-clock"></i> 3 jam</span>
                        <span class="timer-option" data-minutes="360"><i class="far fa-clock"></i> 6 jam</span>
                        <span class="timer-option" data-minutes="720"><i class="far fa-clock"></i> 12 jam</span>
                        <span class="timer-option" data-days="2"><i class="far fa-calendar"></i> 2 hari</span>
                        <span class="timer-option" data-days="3"><i class="far fa-calendar"></i> 3 hari</span>
                        <span class="timer-option" data-days="7"><i class="far fa-calendar"></i> 7 hari</span>
                        <span class="timer-option" data-days="15"><i class="far fa-calendar"></i> 15 hari</span>
                        <span class="timer-option" data-days="30"><i class="far fa-calendar"></i> 30 hari</span>
                    </div>
                    <button id="create-note-btn"><i class="fas fa-hourglass-half"></i> Buat dengan Timer</button>
                </div>
            </div>

            <!-- Konten Quote -->
            <div id="quote-content" style="display: none;">
                <div class="quote-container" id="quote-display">
                    <i class="fas fa-heart" style="color: #ff69b4;"></i> "setiap detik bersamamu adalah anugerah"
                </div>
                <button class="new-quote-btn" id="new-quote"><i class="fas fa-sync-alt"></i> Quote Lainnya</button>
            </div>
        </div>

        <!-- HALAMAN DASHBOARD -->
        <div id="dashboard-page">
            <div class="page-title"><i class="fas fa-heart"></i> Dashboard Cinta</div>
            <div class="dashboard-grid">
                <!-- Statistik -->
                <div class="card">
                    <div class="card-title"><i class="fas fa-chart-pie"></i> Statistik</div>
                    <div class="stats-row">
                        <div class="stat-item">
                            <div class="stat-value" id="stat-total">0</div>
                            <div class="stat-label">Total Foto</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-today">0</div>
                            <div class="stat-label">Hari ini</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="stat-week">0</div>
                            <div class="stat-label">7 Hari</div>
                        </div>
                    </div>
                    <div style="margin-top: 20px; display: flex; justify-content: space-around;">
                        <div><i class="fas fa-female" style="color:#ff69b4;"></i> <span id="stat-suci">0</span></div>
                        <div><i class="fas fa-male" style="color:#ff69b4;"></i> <span id="stat-rizky">0</span></div>
                        <div><i class="fas fa-heart" style="color:#ff69b4;"></i> <span id="stat-bareng">0</span></div>
                    </div>
                </div>

                <!-- Grafik -->
                <div class="card">
                    <div class="card-title"><i class="fas fa-chart-line"></i> Aktivitas 7 Hari</div>
                    <div class="chart-container">
                        <canvas id="photoChart"></canvas>
                    </div>
                </div>

                <!-- Foto Terbaru -->
                <div class="card">
                    <div class="card-title"><i class="fas fa-clock"></i> Foto Terbaru</div>
                    <ul class="recent-list" id="recent-list"></ul>
                </div>

                <!-- Upload Foto -->
                <div class="card">
                    <div class="card-title"><i class="fas fa-cloud-upload-alt"></i> Upload Foto</div>
                    <div class="upload-section">
                        <div class="upload-area">
                            <input type="file" id="file-input" accept="image/*">
                            <label for="file-input" class="file-label"><i class="fas fa-camera"></i> Pilih Foto</label>
                            <img id="image-preview" src="#" alt="preview">
                        </div>
                        <!-- Pilihan Rasio -->
                        <div class="ratio-selector">
                            <button class="ratio-btn active" data-ratio="9:16"><i class="fas fa-mobile-alt"></i> 9:16</button>
                            <button class="ratio-btn" data-ratio="1:1"><i class="fas fa-square"></i> 1:1</button>
                            <button class="ratio-btn" data-ratio="4:3"><i class="fas fa-tablet-alt"></i> 4:3</button>
                        </div>
                        <!-- Pilihan Kategori -->
                        <div class="category-selector">
                            <button class="category-btn active" data-category="suci"><i class="fas fa-female"></i> Suci</button>
                            <button class="category-btn" data-category="rizky"><i class="fas fa-male"></i> Rizky</button>
                            <button class="category-btn" data-category="bareng"><i class="fas fa-heart"></i> Bareng</button>
                        </div>
                        <input type="text" id="photo-title" class="meta-input" placeholder="Judul kenangan (wajib)">
                        <textarea id="photo-desc" class="meta-input" placeholder="Deskripsi (wajib)" rows="2"></textarea>
                        <button class="upload-btn" id="upload-btn"><i class="fas fa-heart"></i> Simpan ke Gallery</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- MODAL PASSWORD DASHBOARD -->
    <div id="password-modal">
        <div class="password-card">
            <h2><i class="fas fa-lock"></i> Dashboard Terkunci</h2>
            <p>Masukkan password spesial:</p>
            <input type="password" id="dashboard-password" class="password-input" placeholder="Password">
            <button class="password-btn" id="unlock-btn"><i class="fas fa-unlock-alt"></i> Buka Dashboard</button>
            <div id="password-error" class="password-error"></div>
        </div>
    </div>

    <!-- Modal Preview Foto -->
    <div id="preview-modal" class="preview-modal">
        <span class="close-preview" id="close-preview">&times;</span>
        <img id="preview-image" src="">
        <div class="preview-caption" id="preview-caption"></div>
    </div>

    <!-- Toast -->
    <div id="toast" class="toast"></div>

    <script>
        (function() {
            // ================= SUPABASE (opsional) =================
            const SUPABASE_URL = 'https://pthnpzycimrowjjyihff.supabase.co';
            const SUPABASE_ANON_KEY = 'isi_dengan_anon_key_anda';  // GANTI jika perlu

            let supabase;
            try {
                if (SUPABASE_ANON_KEY && SUPABASE_ANON_KEY !== 'isi_dengan_anon_key_anda') {
                    supabase = supabaseJs.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
                } else {
                    supabase = null;
                }
            } catch (e) {
                supabase = null;
            }

            // ================= STATE =================
            let photos = [];
            let notes = []; // { id, text, createdAt, timerMinutes, revealAt (timestamp), revealed }
            let selectedFile = null;
            let selectedCategory = 'suci';
            let selectedRatio = '9:16';
            let currentFilter = 'all';
            let currentInnerTab = 'foto';
            let chartInstance = null;
            let dashboardUnlocked = false;

            // Music
            let currentMusicIndex = 0;
            const musicList = [
                { src: 'music/perfect.mp3', name: 'Perfect - Ed Sheeran' },
                { src: 'music/blue.mp3', name: 'Blue - Yung Kai' },
                { src: 'music/sempurna.mp3', name: 'Sempurna - Andra & The Backbone' }
            ];
            let audio = document.getElementById('audio-player');
            let isPlaying = false;

            // DOM
            const galleryPage = document.getElementById('gallery-page');
            const dashboardPage = document.getElementById('dashboard-page');
            const navLinks = document.querySelectorAll('.nav-link');
            const innerTabs = document.querySelectorAll('.inner-tab');
            const fotoContent = document.getElementById('foto-content');
            const catatanContent = document.getElementById('catatan-content');
            const quoteContent = document.getElementById('quote-content');
            const galleryGrid = document.getElementById('gallery-grid');
            const emptyGallery = document.getElementById('empty-gallery');
            const statTotal = document.getElementById('stat-total');
            const statToday = document.getElementById('stat-today');
            const statWeek = document.getElementById('stat-week');
            const statSuci = document.getElementById('stat-suci');
            const statRizky = document.getElementById('stat-rizky');
            const statBareng = document.getElementById('stat-bareng');
            const recentList = document.getElementById('recent-list');
            const fileInput = document.getElementById('file-input');
            const imagePreview = document.getElementById('image-preview');
            const photoTitle = document.getElementById('photo-title');
            const photoDesc = document.getElementById('photo-desc');
            const uploadBtn = document.getElementById('upload-btn');
            const previewModal = document.getElementById('preview-modal');
            const previewImage = document.getElementById('preview-image');
            const previewCaption = document.getElementById('preview-caption');
            const closePreview = document.getElementById('close-preview');
            const toast = document.getElementById('toast');
            const ipSpan = document.getElementById('ip-address');
            const batterySpan = document.getElementById('battery-level');
            const dateSpan = document.getElementById('current-date');
            const quoteDisplay = document.getElementById('quote-display');
            const newQuoteBtn = document.getElementById('new-quote');
            const notesList = document.getElementById('notes-list');
            const newNoteText = document.getElementById('new-note-text');
            const createNoteBtn = document.getElementById('create-note-btn');
            const timerOptions = document.querySelectorAll('.timer-option');
            const galleryTabs = document.querySelectorAll('.gallery-tab');
            const categoryBtns = document.querySelectorAll('.category-btn');
            const ratioBtns = document.querySelectorAll('.ratio-btn');
            const playPauseBtn = document.getElementById('play-pause-btn');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const musicInfo = document.getElementById('music-info');
            const playlistItems = document.querySelectorAll('.playlist-item');
            const passwordModal = document.getElementById('password-modal');
            const unlockBtn = document.getElementById('unlock-btn');
            const dashboardPassword = document.getElementById('dashboard-password');
            const passwordError = document.getElementById('password-error');

            // ================= HELPER =================
            function showToast(msg, duration = 2000) {
                toast.innerHTML = `<i class="fas fa-heart"></i> ${msg}`;
                toast.style.display = 'flex';
                setTimeout(() => { toast.style.display = 'none'; }, duration);
            }

            // Load photos dari storage
            function loadPhotos() {
                if (supabase) {
                    // jika pakai supabase, implementasi ambil data
                    // untuk demo, pakai localStorage dulu
                    photos = JSON.parse(localStorage.getItem('gallery_photos') || '[]');
                } else {
                    photos = JSON.parse(localStorage.getItem('gallery_photos') || '[]');
                }
                renderGallery();
                updateStats();
                updateRecentList();
                updateChart();
            }

            // Simpan photos
            function savePhotos() {
                localStorage.setItem('gallery_photos', JSON.stringify(photos));
            }

            // Load notes
            function loadNotes() {
                notes = JSON.parse(localStorage.getItem('gallery_notes') || '[]');
                // Cek timer yang sudah lewat
                const now = Date.now();
                let updated = false;
                notes.forEach(n => {
                    if (!n.revealed && n.revealAt <= now) {
                        n.revealed = true;
                        updated = true;
                    }
                });
                if (updated) {
                    saveNotes();
                }
                renderNotes();
            }

            function saveNotes() {
                localStorage.setItem('gallery_notes', JSON.stringify(notes));
            }

            // Render Gallery
            function renderGallery() {
                let filtered = photos;
                if (currentFilter !== 'all') {
                    filtered = photos.filter(p => p.category === currentFilter);
                }
                if (filtered.length === 0) {
                    galleryGrid.innerHTML = '';
                    emptyGallery.style.display = 'block';
                    return;
                }
                emptyGallery.style.display = 'none';
                let html = '';
                filtered.forEach(p => {
                    html += `
                        <div class="photo-card" data-id="${p.id}" data-url="${p.image_url}" data-title="${p.title}" data-desc="${p.description}">
                            <img src="${p.image_url}" alt="${p.title}" loading="lazy">
                            <div class="photo-info">
                                <h4>${p.title}</h4>
                                <p>${p.description}</p>
                            </div>
                        </div>
                    `;
                });
                galleryGrid.innerHTML = html;
                document.querySelectorAll('.photo-card').forEach(c => {
                    c.addEventListener('click', () => {
                        previewImage.src = c.dataset.url;
                        previewCaption.textContent = `${c.dataset.title} — ${c.dataset.desc}`;
                        previewModal.style.display = 'flex';
                    });
                });
            }

            // Render Notes
            function renderNotes() {
                const now = Date.now();
                let html = '';
                notes.forEach(n => {
                    if (n.revealed) {
                        html += `
                            <div class="note-card">
                                <div class="note-header">
                                    <span class="note-time"><i class="far fa-calendar-alt"></i> ${new Date(n.createdAt).toLocaleString()}</span>
                                </div>
                                <div class="note-content">${n.text}</div>
                            </div>
                        `;
                    } else {
                        // tampilkan timer
                        const remaining = Math.max(0, n.revealAt - now);
                        const minutes = Math.floor(remaining / 60000);
                        const hours = Math.floor(minutes / 60);
                        const days = Math.floor(hours / 24);
                        let timeText = '';
                        if (days > 0) timeText = `${days} hari lagi`;
                        else if (hours > 0) timeText = `${hours} jam lagi`;
                        else timeText = `${minutes} menit lagi`;
                        html += `
                            <div class="note-card" style="opacity:0.7;">
                                <div class="note-header">
                                    <span class="note-time"><i class="fas fa-hourglass-half"></i> Muncul dalam: <span class="note-timer">${timeText}</span></span>
                                </div>
                                <div class="note-content"><i class="fas fa-lock"></i> Pesan disembunyikan sampai waktu habis</div>
                            </div>
                        `;
                    }
                });
                if (notes.length === 0) {
                    html = '<div class="empty-message"><i class="fas fa-pen"></i> Belum ada catatan. Buat catatan baru!</div>';
                }
                notesList.innerHTML = html;
            }

            function updateStats() {
                const now = new Date();
                const todayStr = now.toDateString();
                const weekAgo = new Date(now.getTime() - 7*24*60*60*1000);
                let total = photos.length;
                let today = 0, week = 0;
                let suci = 0, rizky = 0, bareng = 0;
                photos.forEach(p => {
                    const d = new Date(p.created_at);
                    if (d.toDateString() === todayStr) today++;
                    if (d >= weekAgo) week++;
                    if (p.category === 'suci') suci++;
                    else if (p.category === 'rizky') rizky++;
                    else if (p.category === 'bareng') bareng++;
                });
                statTotal.textContent = total;
                statToday.textContent = today;
                statWeek.textContent = week;
                statSuci.textContent = suci;
                statRizky.textContent = rizky;
                statBareng.textContent = bareng;
            }

            function updateRecentList() {
                const recent = photos.slice(0, 5);
                let html = '';
                recent.forEach(p => {
                    html += `
                        <li class="recent-item">
                            <img src="${p.image_url}" alt="">
                            <div class="recent-info">
                                <h5>${p.title}</h5>
                                <p>${new Date(p.created_at).toLocaleDateString('id-ID')}</p>
                            </div>
                            <button class="delete-btn" data-id="${p.id}"><i class="fas fa-trash-alt"></i></button>
                        </li>
                    `;
                });
                recentList.innerHTML = html;
                document.querySelectorAll('.delete-btn').forEach(btn => {
                    btn.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const id = btn.dataset.id;
                        deletePhoto(id);
                    });
                });
            }

            function deletePhoto(id) {
                if (!confirm('Hapus foto ini?')) return;
                photos = photos.filter(p => p.id !== id);
                savePhotos();
                loadPhotos();
                showToast('Foto dihapus');
            }

            function updateChart() {
                const labels = [];
                const counts = [];
                for (let i = 6; i >= 0; i--) {
                    const d = new Date();
                    d.setDate(d.getDate() - i);
                    const dateStr = d.toDateString();
                    labels.push(d.toLocaleDateString('id-ID', { weekday: 'short' }));
                    const count = photos.filter(p => new Date(p.created_at).toDateString() === dateStr).length;
                    counts.push(count);
                }

                const ctx = document.getElementById('photoChart').getContext('2d');
                if (chartInstance) chartInstance.destroy();
                chartInstance = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: labels,
                        datasets: [{
                            label: 'Foto',
                            data: counts,
                            backgroundColor: '#ffb6c1',
                            borderRadius: 10,
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } }
                    }
                });
            }

            // Upload foto
            async function uploadPhoto() {
                if (!selectedFile) { showToast('Pilih foto dulu'); return; }
                const title = photoTitle.value.trim();
                const desc = photoDesc.value.trim();
                if (!title || !desc) { showToast('Judul & deskripsi wajib'); return; }

                uploadBtn.disabled = true;
                uploadBtn.innerHTML = '<i class="fas fa-spinner fa-pulse"></i> Menyimpan...';

                try {
                    let imageUrl = '';
                    if (supabase) {
                        // Implementasi upload ke supabase (sama seperti sebelumnya)
                        // Untuk demo, kita pakai base64
                        const reader = new FileReader();
                        imageUrl = await new Promise(resolve => {
                            reader.onload = e => resolve(e.target.result);
                            reader.readAsDataURL(selectedFile);
                        });
                    } else {
                        const reader = new FileReader();
                        imageUrl = await new Promise(resolve => {
                            reader.onload = e => resolve(e.target.result);
                            reader.readAsDataURL(selectedFile);
                        });
                    }
                    const newPhoto = {
                        id: 'local_' + Date.now(),
                        title,
                        description: desc,
                        image_url: imageUrl,
                        category: selectedCategory,
                        aspect_ratio: selectedRatio,
                        created_at: new Date().toISOString()
                    };
                    photos = [newPhoto, ...photos];
                    savePhotos();
                    showToast('✨ Foto tersimpan!');
                    // Reset form
                    selectedFile = null;
                    fileInput.value = '';
                    imagePreview.style.display = 'none';
                    photoTitle.value = '';
                    photoDesc.value = '';
                    loadPhotos();
                } catch (err) {
                    showToast('Gagal: ' + err.message);
                } finally {
                    uploadBtn.disabled = false;
                    uploadBtn.innerHTML = '<i class="fas fa-heart"></i> Simpan';
                }
            }

            // Buat catatan baru
            function createNote() {
                const text = newNoteText.value.trim();
                if (!text) { showToast('Tulis catatan dulu'); return; }

                // Ambil timer yang dipilih
                const selectedTimer = document.querySelector('.timer-option.active');
                if (!selectedTimer) { showToast('Pilih timer'); return; }

                let minutes = 0;
                if (selectedTimer.dataset.minutes) {
                    minutes = parseInt(selectedTimer.dataset.minutes);
                } else if (selectedTimer.dataset.days) {
                    minutes = parseInt(selectedTimer.dataset.days) * 24 * 60;
                }

                const now = Date.now();
                const revealAt = now + minutes * 60 * 1000;

                const newNote = {
                    id: 'note_' + Date.now(),
                    text: text,
                    createdAt: now,
                    timerMinutes: minutes,
                    revealAt: revealAt,
                    revealed: false
                };
                notes.push(newNote);
                saveNotes();
                renderNotes();
                newNoteText.value = '';
                showToast(`Catatan akan muncul dalam ${minutes} menit`);
            }

            // ================= STATUS BAR =================
            async function updateIP() {
                try {
                    const res = await fetch('https://api.ipify.org?format=json');
                    const data = await res.json();
                    ipSpan.textContent = data.ip;
                } catch { ipSpan.textContent = 'unknown'; }
            }
            async function updateBattery() {
                try {
                    const battery = await navigator.getBattery();
                    const update = () => { batterySpan.textContent = Math.round(battery.level * 100) + '%'; };
                    update();
                    battery.addEventListener('levelchange', update);
                } catch { batterySpan.textContent = '🌈'; }
            }
            function updateDateTime() {
                const d = new Date();
                dateSpan.textContent = d.toLocaleDateString('id-ID', { day:'numeric', month:'short', hour:'2-digit', minute:'2-digit' });
            }

            // ================= QUOTE =================
            const quotes = [
                "setiap foto adalah bukti cinta kita",
                "kamu adalah alasan aku tersenyum",
                "aku suka kamu, hari ini dan selamanya",
                "bersamamu adalah rumah",
                "senyummu lebih indah dari sunset",
                "cintaku padamu sebesar galaxy",
                "kamu adalah kata sandi hatiku",
                "aku jatuh cinta setiap kali melihatmu",
                "bersamamu, waktu terasa cepat",
                "kamu adalah hadiah terindah"
            ];
            function randomQuote() {
                const quote = quotes[Math.floor(Math.random() * quotes.length)];
                quoteDisplay.innerHTML = `<i class="fas fa-heart" style="color: #ff69b4;"></i> "${quote}"`;
            }
            newQuoteBtn.addEventListener('click', randomQuote);

            // ================= MUSIC =================
            function loadMusic(index) {
                const music = musicList[index];
                audio.src = music.src;
                musicInfo.textContent = music.name;
                playlistItems.forEach((item, i) => {
                    if (i === index) item.classList.add('active');
                    else item.classList.remove('active');
                });
                if (isPlaying) {
                    audio.play();
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    audio.pause();
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                }
            }
            playPauseBtn.addEventListener('click', () => {
                if (isPlaying) {
                    audio.pause();
                    playPauseBtn.innerHTML = '<i class="fas fa-play"></i>';
                } else {
                    audio.play();
                    playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                }
                isPlaying = !isPlaying;
            });
            prevBtn.addEventListener('click', () => {
                currentMusicIndex = (currentMusicIndex - 1 + musicList.length) % musicList.length;
                loadMusic(currentMusicIndex);
                if (isPlaying) audio.play();
            });
            nextBtn.addEventListener('click', () => {
                currentMusicIndex = (currentMusicIndex + 1) % musicList.length;
                loadMusic(currentMusicIndex);
                if (isPlaying) audio.play();
            });
            playlistItems.forEach((item, idx) => {
                item.addEventListener('click', () => {
                    currentMusicIndex = idx;
                    loadMusic(currentMusicIndex);
                    if (!isPlaying) {
                        audio.play();
                        isPlaying = true;
                        playPauseBtn.innerHTML = '<i class="fas fa-pause"></i>';
                    } else {
                        audio.play();
                    }
                });
            });
            audio.addEventListener('ended', () => {
                nextBtn.click();
            });
            loadMusic(0);

            // ================= NAVIGASI & PASSWORD =================
            navLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const page = link.dataset.page;
                    if (page === 'dashboard' && !dashboardUnlocked) {
                        passwordModal.style.display = 'flex';
                        return;
                    }
                    setActivePage(page);
                });
            });

            function setActivePage(page) {
                navLinks.forEach(l => l.classList.remove('active'));
                document.querySelector(`.nav-link[data-page="${page}"]`).classList.add('active');
                if (page === 'gallery') {
                    galleryPage.classList.add('active-page');
                    dashboardPage.classList.remove('active-page');
                } else {
                    galleryPage.classList.remove('active-page');
                    dashboardPage.classList.add('active-page');
                    if (dashboardUnlocked) {
                        updateStats();
                        updateRecentList();
                        updateChart();
                    }
                }
            }

            unlockBtn.addEventListener('click', () => {
                if (dashboardPassword.value === 'SuciLovee') {
                    dashboardUnlocked = true;
                    passwordModal.style.display = 'none';
                    setActivePage('dashboard');
                } else {
                    passwordError.textContent = 'Password salah, coba lagi.';
                }
            });

            // Tutup modal jika klik di luar
            window.addEventListener('click', (e) => {
                if (e.target === passwordModal) {
                    passwordModal.style.display = 'none';
                }
            });

            // Inner tabs
            innerTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    innerTabs.forEach(t => t.classList.remove('active'));
                    tab.classList.add('active');
                    const inner = tab.dataset.inner;
                    fotoContent.style.display = inner === 'foto' ? 'block' : 'none';
                    catatanContent.style.display = inner === 'catatan' ? 'block' : 'none';
                    quoteContent.style.display = inner === 'quote' ? 'block' : 'none';
                    if (inner === 'catatan') renderNotes();
                    if (inner === 'quote') randomQuote();
                });
            });

            // Filter foto
            galleryTabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    galleryTabs.forEach(t => {
                        t.style.background = 'rgba(255,255,255,0.6)';
                        t.style.color = '#b34e7a';
                    });
                    tab.style.background = '#ff69b4';
                    tab.style.color = 'white';
                    currentFilter = tab.dataset.filter;
                    renderGallery();
                });
            });

            // Timer options
            timerOptions.forEach(opt => {
                opt.addEventListener('click', () => {
                    timerOptions.forEach(o => o.classList.remove('active'));
                    opt.classList.add('active');
                });
            });

            // Category upload
            categoryBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    categoryBtns.forEach(b => b.classList.remove('active'));
                    btn.classList.add('active');
                    selectedCategory = btn.dataset.category;
                });
            });

            // Ratio buttons
            ratioBtns.forEach(btn => {
                btn.addEventListener('click', () => {
                    ratioBtns.forEach(r => r.classList.remove('active'));
                    btn.classList.add('active');
                    selectedRatio = btn.dataset.ratio;
                });
            });

            // File input preview
            fileInput.addEventListener('change', (e) => {
                const file = e.target.files[0];
                if (!file) return;
                selectedFile = file;
                const reader = new FileReader();
                reader.onload = ev => { imagePreview.src = ev.target.result; imagePreview.style.display = 'block'; };
                reader.readAsDataURL(file);
            });

            uploadBtn.addEventListener('click', uploadPhoto);
            createNoteBtn.addEventListener('click', createNote);

            // Preview modal close
            closePreview.addEventListener('click', () => { previewModal.style.display = 'none'; });
            window.addEventListener('click', (e) => { if (e.target === previewModal) previewModal.style.display = 'none'; });

            // ================= INIT =================
            window.addEventListener('load', async () => {
                loadPhotos();
                loadNotes();
                updateIP();
                updateBattery();
                updateDateTime();
                setInterval(updateDateTime, 1000);
                randomQuote();

                // Set timer default (10 menit)
                timerOptions[0].classList.add('active');

                // Periksa setiap menit untuk update timer
                setInterval(() => {
                    loadNotes(); // akan mengecek reveal
                }, 60000);
            });
        })();
    </script>
</body>
</html>
